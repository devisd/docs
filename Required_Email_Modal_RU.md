# Документация для RequiredEmailModal и связанных компонентов

Эта документация описывает функциональность и использование компонента `RequiredEmailModal` вместе с его подкомпонентами: `Attention`, `InputEmail`, `Confirm` и `ErrorPopup`. Каждый компонент играет свою роль в обеспечении наличия у пользователей подтвержденного адреса электронной почты.

## Общий обзор

Компонент `RequiredEmailModal` предназначен для запроса у пользователей ввода и подтверждения их адресов электронной почты, если они еще этого не сделали. Он взаимодействует с несколькими подкомпонентами, чтобы провести пользователей через этот процесс. Здесь представлен обзор каждого компонента и того, как они работают вместе.

## Компоненты

### RequiredEmailModal

Основной компонент, который управляет состоянием модального окна и отображает соответствующие подкомпоненты в зависимости от статуса электронной почты пользователя.

#### Переменные состояния
- `active`: Управляет видимостью модального окна.
- `profile`: Содержит данные профиля пользователя.
- `showInput`: Переключает видимость формы ввода электронной почты.
- `showText`: Переключает видимость сообщения подтверждения.
- `showTextWithLink`: Переключает видимость всплывающего окна ошибки.

#### Методы жизненного цикла
- `useEffect`: Получает данные профиля пользователя при монтировании компонента.

#### Обработчики событий
- `handleWarningButtonClick`: Отображает форму ввода электронной почты.
- `handleInputSave`: Скрывает форму ввода и показывает сообщение подтверждения.
- `handleTextButtonClick`: Скрывает сообщение подтверждения и показывает всплывающее окно ошибки.
- `handleSetActive`: Скрывает модальное окно.

#### Логика отображения
- Если электронная почта пользователя подтверждена, модальное окно не отображается.
- Отображает компонент `Attention`, если не отображается ни ввод, ни текст, ни ссылка, и если отсутствует электронная почта.
- Отображает компонент `InputEmail`, если `showInput` равно true.
- Отображает компонент `Confirm`, если `showText` равно true и `showTextWithLink` равно false.
- Отображает компонент `ErrorPopup`, если `showTextWithLink` равно true или электронная почта не подтверждена.

### Attention

Компонент, который отображает начальное сообщение с просьбой ввести адрес электронной почты.

#### Пропсы
- `onClick`: Функция для обработки события нажатия кнопки для отображения формы ввода электронной почты.

#### Логика отображения
- Отображает сообщение с просьбой ввести адрес электронной почты.
- Включает кнопку, которая вызывает `onClick`.

### InputEmail

Форма, позволяющая пользователям ввести свой адрес электронной почты.

#### Пропсы
- `onSave`: Функция для обработки события сохранения формы ввода.

#### Переменные состояния
- `loading`: Управляет состоянием загрузки при отправке формы.
- `autocomplete`: Хранит предложения автозаполнения электронной почты.

#### Методы жизненного цикла
- `useEffect`: Получает предложения автозаполнения электронной почты при монтировании компонента.

#### Обработчики событий
- `onSubmit`: Обрабатывает отправку формы, обновляет электронную почту и вызывает `onSave`.

#### Логика отображения
- Отображает поле ввода для адреса электронной почты.
- Включает кнопку отправки, которая запускает отправку формы.

### Confirm

Компонент, который отображает сообщение подтверждения после ввода электронной почты.

#### Пропсы
- `onFalse`: Функция для обработки случая, когда подтверждение электронной почты не удалось.
- `setActive`: Функция для скрытия модального окна.

#### Переменные состояния
- `profile`: Содержит данные профиля пользователя.
- `loading`: Управляет состоянием загрузки во время проверки подтверждения.

#### Методы жизненного цикла
- `useEffect`: Получает данные профиля пользователя при монтировании компонента.

#### Обработчики событий
- `handleClick`: Обрабатывает проверку подтверждения, вызывая соответствующие действия в зависимости от статуса подтверждения электронной почты.

#### Логика отображения
- Отображает сообщение подтверждения с адресом электронной почты пользователя.
- Включает кнопки для подтверждения действия или возврата назад.

### ErrorPopup

Компонент, который отображает сообщение об ошибке, если подтверждение электронной почты не удалось.

#### Пропсы
- `onFalse`: Функция для повторной попытки подтверждения электронной почты.
- `setActive`: Функция для скрытия модального окна.

#### Переменные состояния
- `loading`: Управляет состоянием загрузки во время повторной попытки.

#### Обработчики событий
- `handleClick`: Обрабатывает повторную попытку, проверяя статус подтверждения электронной почты через определенные интервалы времени.
- `handleBackClick`: Обрабатывает действие возврата и скрывает модальное окно.

#### Логика отображения
- Отображает сообщение об ошибке с ссылкой для обновления электронной почты.
- Включает кнопки для повторной попытки подтверждения или возврата назад.

## Стили

Каждый компонент импортирует свой соответствующий CSS-модуль для стилизации:
- `RequiredEmailModal` использует `RequiredEmailModal.module.scss`.
- `Attention` использует `Attention.module.scss`.
- `InputEmail` использует `InputEmail.module.scss`.
- `Confirm` использует `Confirm.module.scss`.
- `ErrorPopup` использует `ErrorPopup.module.scss`.

## Пример использования

```jsx
import { RequiredEmailModal } from './RequiredEmailModal';

const App = () => {
  return (
    <div>
      <RequiredEmailModal />
    </div>
  );
};

export default App;
```

Этот пример демонстрирует, как включить `RequiredEmailModal` в React-приложение. Модальное окно будет обрабатывать все необходимые запросы и взаимодействия для обеспечения наличия у пользователя подтвержденного адреса электронной почты.
